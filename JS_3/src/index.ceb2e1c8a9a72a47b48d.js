!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);class r{constructor(t,e,o,r){this.name=e,this.type=o,this.id=t,this.cost=r}}class n{constructor(t,e,o,r=0,n=0){this.id=t,this.firstname=e,this.lastName=o,this.spentMoney=r,this.buyProbactsCount=n,this.buyProducts=[]}}class s{constructor(t,e,o,r=1,n=new Date){this.productName=t,this.type=e,this.sum=o,this.amount=r,this.createdAt=n}}let u=new n(1,"Mary","Smit"),c=new n(2,"Jon","Smit"),d=new r(1,"Яблоко","Фрукты",20),i=new r(2,"Яблоко","Фрукты",20),l=new r(3,"Яблоко","Фрукты",20),a=new r(4,"Яблоко","Фрукты",20),p=new r(5,"Картошка","Овощи",25),h=new r(6,"Картошка","Овощи",25),y=new r(7,"Морковка","Овощи",35),f=new r(8,"Морковка","Овощи",35);const P=new class{constructor(){this.clients=[],this.products=[],this.purchases=[]}addClient(t){this.clients.push(t)}deleteClient(t){this.clients.forEach((e,o,r)=>{e.id==t.id&&r.splice(o,1)})}addProduct(t){this.products.push(t)}deleteProduct(t){this.products.forEach((e,o,r)=>{e.id==t.id&&r.splice(o,1)})}addPurchase(t){this.purchases.push(t)}sellProduct(t,e,o){let r=this.products.filter(t=>t.name==e),n=r[0];if(!r)return`Товара ${e} нет на скаладе!`;if(r.length<o)return`Недостаточное количество товара ${e} на складе!`;r.splice(0,r.length-o);let u=n.cost*o;r.forEach(t=>{this.deleteProduct(t)}),this.addPurchase(new s(n.name,n.type,u,o)),t.spentMoney+=u,t.buyProbactsCount+=o,t.buyProducts.push(e,o)}purchasedProductsCount(){return this.purchases.map(t=>t.amount).reduce((t,e)=>t+e)}earnedMoney(){return this.clients.map(t=>t.spentMoney).reduce((t,e)=>t+e)}productsCount(){return this.products.length}productsCountByType(){let t={};return this.products.map(t=>t.type).forEach((function(e){t[e]=(t[e]||0)+1})),t}purchasedSumByType(){let t={};return this.purchases.forEach((function(e){t[e.type]=(t[e.type]||0)+e.sum})),t}};P.addClient(u),P.addClient(c),P.addProduct(d),P.addProduct(i),P.addProduct(l),P.addProduct(a),P.addProduct(p),P.addProduct(h),P.addProduct(y),P.addProduct(f),P.sellProduct(u,"Картошка",2),P.sellProduct(u,"Яблоко",2),P.sellProduct(c,"Морковка",1),P.sellProduct(u,"Морковка",1),console.log(P.purchasedProductsCount()),console.log(P.earnedMoney()),console.log(P.productsCount()),console.log(P.productsCountByType()),console.log(P.purchasedSumByType()),console.log(P),console.log(u),console.log(c),console.log(u.buyProducts),console.log(c.buyProducts)}]);